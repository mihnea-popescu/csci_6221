<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8" />
	<title>Elm Pok√©mon</title>
	<style>
		body {
			margin: 0;
			padding: 0;
			font-family: sans-serif;
		}
	</style>
</head>

<body>
	<div id="elm"></div>
	<script src="main.js"></script>
	<script>
		const flags = {
			userAgent: navigator.userAgent,
			screenWidth: window.screen.width,
			screenHeight: window.screen.height,
			language: navigator.language,
			timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
		};

		const app = Elm.Main.init({
			node: document.getElementById("elm"),
			flags,
		});

		const STORAGE_KEY = "pokemon-seed";

		app.ports.loadSeed.subscribe(() => {
			const stored = localStorage.getItem(STORAGE_KEY);
			const seed = stored ? parseInt(stored) : 0;
			app.ports.onSeedLoaded.send(seed);
		});

		app.ports.saveSeed.subscribe((seed) => {
			localStorage.setItem(STORAGE_KEY, String(seed));
		});
	</script>
</body>

</html>